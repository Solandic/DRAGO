"use strict";(self.webpackJsonp__wix_thunderbolt_app=self.webpackJsonp__wix_thunderbolt_app||[]).push([[5433],{59062:(e,t,o)=>{o.r(t),o.d(t,{LightboxSymbol:()=>n.KK,LightboxUtilsSymbol:()=>n.By,name:()=>n.UU,page:()=>B,site:()=>F});var n=o(45117),i=o(32166),a=o(12482),r=o(16537),g=o(77748),p=o(20590),s=o(75396),d=o(32777),l=o(10553),u=o(82658),c=o(98323),h=o(66084),b=o(84448),m=o(51360),x=o(79460);const L={},P=(0,g.Og)([h.SB,i.RV,(0,g.KT)(p.wk,n.UU),(0,g.KT)(p.YG,n.UU),(0,g.KT)(p._K,n.UU),h.re,b.W,s.t7,n.J9,c.j,n.Q9,n.Xd,d.F,x.q,l.n],(({initPage:e},t,o,{prefixToRouterFetchData:n,pageIdToPrefix:i},a,g,p,s,d,l,c,{handleResponse:h},b,{getFetchParams:x},P)=>{const T=[],v=[];let U,y=null;const O=t?.document.querySelector("#site-root"),I=e=>{"Escape"===e.key&&K()},K=async()=>{const e=w();if(!e)return;const{pendingLightboxId:n}=o.get()||{},i=n&&n!==e,a=y,p=await g(e,e),s=await p.getAllImplementersOfAsync(r.$.PageWillUnmountHandler);if(await Promise.all(s.map((t=>t.pageWillUnmount({pageId:e,contextId:e})))),c.removeLightboxFromDynamicStructure(e),a?.(),v.forEach((e=>e?.())),i)return;l.disableCyclicTabbing(e),P["specs.thunderbolt.screen_reader_focus"]&&O?.removeAttribute("aria-hidden"),(0,u.fU)(t)||t.removeEventListener("keydown",I);const h=d.isDuringReopen()?w():void 0;o.update((e=>({...e,pageWillLoadHandler:null,currentLightboxId:h,pendingLightboxId:void 0,lightboxRouteData:void 0})))},w=()=>o.get()?o.get().currentLightboxId:void 0,R=async(a,r,g)=>{L[a]={lightboxViewerContext:g};const v=i[a],U=n[v];if(U){const{url:e,options:t}=x(m.U.Lightboxes,U,{lightboxId:a}),{pageId:o}=await h(b.envFetch(e,t));a=o??a}if((e=>{if(d.isDuringReopen())return!1;const t=o.get();return t?.currentLightboxId===e||t?.pendingLightboxId===e})(a))return void(y=y||r);o.update((e=>({...e,pendingLightboxId:a}))),l.enableCyclicTabbing(a),P["specs.thunderbolt.screen_reader_focus"]&&O?.setAttribute("aria-hidden","true");const w=!s.isLandingOnProtectedPage();w&&(p.startNavigation(!0),p.setShouldBlockRender(!0)),await e({pageId:a,contextId:a}),y=r,T.length>0&&T.forEach((e=>{e&&e(a)})),(0,u.fU)(t)||t.addEventListener("keydown",I),w&&p.setShouldBlockRender(!1),await c.addLightboxToDynamicStructure(a),o.update((e=>({...e,pageWillLoadHandler:K,currentLightboxId:a}))),w&&p.endNavigation()};return{isLightbox:e=>a.popupPages[e],open(e,t=null,n){const i=(o.get()?.pendingLightboxPromise||Promise.resolve()).then((()=>R(e,t,n)));return o.update((e=>({...e,pendingLightboxPromise:i}))),i},close:K,getContext:e=>L[e]?.lightboxViewerContext,registerToLightboxEvent(e,o){switch(e){case"popupScroll":U=o;const e=t.document.getElementById("POPUPS_ROOT"),n=e?.querySelector('div[class*="overflow-wrapper"]'),i=a.isResponsive&&n||e;i&&i.addEventListener("scroll",U);break;case"popupOpen":T.push(o);break;case"popupClose":v.push(o)}},getCurrentLightboxId:w,isOpen:()=>!!w()}})),T=(0,g.Og)([],(()=>({isDuringReopen:()=>!1}))),v=(0,g.Og)([(0,g.KT)(p.wk,"lightbox"),b.W,s.t7],((e,t,o)=>({name:"popupsPageNavigationHandler",appWillLoadPage:()=>{t.isFirstNavigation()&&!o.isLandingOnProtectedPage()&&e.update((e=>({...e,pendingLightboxPromise:t.waitForNavigationEnd()}))),e.get()?.pageWillLoadHandler?.()}})));var U=o(85740),y=o(71085);const O=["SCROLL_TO_TOP","SCROLL_TO_BOTTOM"],I=(0,g.Og)([n.KK,y.$1],((e,t)=>({handlerId:n.UU,handleClick:o=>{const n=o.getAttribute("data-popupid");if(n)return e.open(n),!0;const i=t.getFullUrlWithoutQueryParams(),a=!!e.getCurrentLightboxId(),r=o.getAttribute("href"),g=r&&(0,U.b7)(r),p=(0,U.b5)(i)===(0,U.b5)(g||""),s=o.getAttribute("data-anchor")||"",d=O.includes(s),l="_blank"===o.getAttribute("target");return!(!a||!p&&!d||l)&&(e.close(),!0)}})));var K=o(66225);const w=(0,g.Og)([n.KK,K.T],((e,t)=>({componentTypes:["PopupCloseIconButton"],componentWillMount(o){t.register(o.id,"onClick",e.close)}}))),R=(0,g.Og)([(0,g.KT)(p.Gp,n.UU),n.KK,K.T],(({closeSiteButtons:e},t,o)=>({componentTypes:["SiteButton"],componentWillMount(n){e[n.id]&&o.register(n.id,"onClick",t.close)}}))),C=(0,g.Og)([(0,g.KT)(p.Gp,n.UU),n.KK,K.T],(({popupsWithCloseOnOverlayClick:e},t,o)=>({componentTypes:["PopupPage","ResponsivePopupPage"],componentWillMount(n){e[n.id]&&o.register(n.id,"onClick",t.close)}}))),_=(0,g.Og)([(0,g.KT)(p._K,n.UU),(0,g.KT)(p.wk,n.UU)],((e,t)=>({isLightbox:t=>e.popupPages[t],getCurrentLightboxId:()=>t.get()?.pendingLightboxId||t.get()?.currentLightboxId,getLightboxPages:()=>e.popupPages,getLightboxRouteData:()=>t.get()?.lightboxRouteData}))),D=(0,g.Og)([n.By,l.n],(e=>({platformEnvData:()=>({popups:{popupPages:e.getLightboxPages(),lightboxRouteData:e.getLightboxRouteData()}})})));var S=o(20636),f=o(87711);const k=(0,g.Og)([f.eZ,(0,g.KT)(p._K,n.UU),(0,g.KT)(p.AF,n.UU)],((e,t,o)=>({addLightboxToDynamicStructure:n=>{const i=e.getPageWrapperComponentId(n,n);return o.export({lightboxPageId:n}),e.addComponentToDynamicStructure("POPUPS_ROOT",{componentType:"PopupRoot",components:[i],uiType:t.isResponsive?"Responsive":"Classic"},{[i]:{componentType:"PageMountUnmount",components:[n]}})},removeLightboxFromDynamicStructure:t=>{const n=e.getPageWrapperComponentId(t,t);e.removeComponentFromDynamicStructure(n),e.removeComponentFromDynamicStructure("POPUPS_ROOT"),o.export({lightboxPageId:void 0})}}))),W=(0,g.Og)([(0,g.KT)(p.wk,n.UU)],(e=>({handleResponse:async t=>t.then((async t=>{if(!t.ok)throw t;const{result:o}=await t.json(),{page:n,data:i,head:a,publicData:r}=o,g={publicData:r,pageHeadData:a,pageData:i};return e.update((e=>({...e,lightboxRouteData:g}))),{pageId:n||null}})).catch((()=>({pageId:null})))}))),F=e=>{e(n.J9).to(T),e(n.KK).to(P),e(i.ew).to(D),e(n.By).to(_),e(a.y7).to(I),e(r.$.AppWillLoadPageHandler).to(v),e(n.Q9).to(k),e(n.Xd).to(W)},B=e=>{e(S.ls).to(w),e(S.ls).to(R),e(S.ls).to(C)}}}]);
//# sourceMappingURL=https://static.parastorage.com/services/wix-thunderbolt/dist/group_20.46ee9c41.chunk.min.js.map
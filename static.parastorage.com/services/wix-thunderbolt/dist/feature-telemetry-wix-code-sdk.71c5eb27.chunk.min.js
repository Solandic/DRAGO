"use strict";(self.webpackJsonp__wix_thunderbolt_app=self.webpackJsonp__wix_thunderbolt_app||[]).push([[1935],{8830:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.EventId=void 0;const n=r(70739),o=".PYFGCRLAOEUIDHTNSQJKXBMWVZ_pyfgcrlaoeuidhtnsqjkxbmwvz1234567890".split("").sort().join("");class s{constructor(){this.b=new Uint8Array(24),n.v4(null,this.b,8)}new(){for(let e=7;e>=0;e--){if(255!==this.b[e]){this.b[e]++;break}this.b[e]=0}return function(e){let t="";const r=e.length;let n=0;for(let s=0;s<r;s++){const r=e[s];switch(s%3){case 0:t+=o[r>>2],n=(3&r)<<4;break;case 1:t+=o[n|r>>4],n=(15&r)<<2;break;case 2:t+=o[n|r>>6],t+=o[63&r],n=0}}return r%3&&(t+=o[n]),t}(this.b)}}t.EventId=s;const a=e.exports;e.exports=s,e.exports=Object.assign(e.exports,a)},70739:(e,t,r)=>{r.r(t),r.d(t,{NIL:()=>R,parse:()=>d,stringify:()=>a.A,v1:()=>u,v3:()=>w,v4:()=>A.A,v5:()=>I,validate:()=>l.A,version:()=>U});var n,o,s=r(93249),a=r(94017),i=0,c=0;const u=function(e,t,r){var u=t&&r||0,l=t||new Array(16),d=(e=e||{}).node||n,f=void 0!==e.clockseq?e.clockseq:o;if(null==d||null==f){var p=e.random||(e.rng||s.A)();null==d&&(d=n=[1|p[0],p[1],p[2],p[3],p[4],p[5]]),null==f&&(f=o=16383&(p[6]<<8|p[7]))}var v=void 0!==e.msecs?e.msecs:Date.now(),g=void 0!==e.nsecs?e.nsecs:c+1,m=v-i+(g-c)/1e4;if(m<0&&void 0===e.clockseq&&(f=f+1&16383),(m<0||v>i)&&void 0===e.nsecs&&(g=0),g>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");i=v,c=g,o=f;var h=(1e4*(268435455&(v+=122192928e5))+g)%4294967296;l[u++]=h>>>24&255,l[u++]=h>>>16&255,l[u++]=h>>>8&255,l[u++]=255&h;var y=v/4294967296*1e4&268435455;l[u++]=y>>>8&255,l[u++]=255&y,l[u++]=y>>>24&15|16,l[u++]=y>>>16&255,l[u++]=f>>>8|128,l[u++]=255&f;for(var b=0;b<6;++b)l[u+b]=d[b];return t||(0,a.A)(l)};var l=r(68957);const d=function(e){if(!(0,l.A)(e))throw TypeError("Invalid UUID");var t,r=new Uint8Array(16);return r[0]=(t=parseInt(e.slice(0,8),16))>>>24,r[1]=t>>>16&255,r[2]=t>>>8&255,r[3]=255&t,r[4]=(t=parseInt(e.slice(9,13),16))>>>8,r[5]=255&t,r[6]=(t=parseInt(e.slice(14,18),16))>>>8,r[7]=255&t,r[8]=(t=parseInt(e.slice(19,23),16))>>>8,r[9]=255&t,r[10]=(t=parseInt(e.slice(24,36),16))/1099511627776&255,r[11]=t/4294967296&255,r[12]=t>>>24&255,r[13]=t>>>16&255,r[14]=t>>>8&255,r[15]=255&t,r};function f(e,t,r){function n(e,n,o,s){if("string"==typeof e&&(e=function(e){e=unescape(encodeURIComponent(e));for(var t=[],r=0;r<e.length;++r)t.push(e.charCodeAt(r));return t}(e)),"string"==typeof n&&(n=d(n)),16!==n.length)throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");var i=new Uint8Array(16+e.length);if(i.set(n),i.set(e,n.length),(i=r(i))[6]=15&i[6]|t,i[8]=63&i[8]|128,o){s=s||0;for(var c=0;c<16;++c)o[s+c]=i[c];return o}return(0,a.A)(i)}try{n.name=e}catch(e){}return n.DNS="6ba7b810-9dad-11d1-80b4-00c04fd430c8",n.URL="6ba7b811-9dad-11d1-80b4-00c04fd430c8",n}function p(e){return 14+(e+64>>>9<<4)+1}function v(e,t){var r=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(r>>16)<<16|65535&r}function g(e,t,r,n,o,s){return v((a=v(v(t,e),v(n,s)))<<(i=o)|a>>>32-i,r);var a,i}function m(e,t,r,n,o,s,a){return g(t&r|~t&n,e,t,o,s,a)}function h(e,t,r,n,o,s,a){return g(t&n|r&~n,e,t,o,s,a)}function y(e,t,r,n,o,s,a){return g(t^r^n,e,t,o,s,a)}function b(e,t,r,n,o,s,a){return g(r^(t|~n),e,t,o,s,a)}const w=f("v3",48,(function(e){if("string"==typeof e){var t=unescape(encodeURIComponent(e));e=new Uint8Array(t.length);for(var r=0;r<t.length;++r)e[r]=t.charCodeAt(r)}return function(e){for(var t=[],r=32*e.length,n="0123456789abcdef",o=0;o<r;o+=8){var s=e[o>>5]>>>o%32&255,a=parseInt(n.charAt(s>>>4&15)+n.charAt(15&s),16);t.push(a)}return t}(function(e,t){e[t>>5]|=128<<t%32,e[p(t)-1]=t;for(var r=1732584193,n=-271733879,o=-1732584194,s=271733878,a=0;a<e.length;a+=16){var i=r,c=n,u=o,l=s;r=m(r,n,o,s,e[a],7,-680876936),s=m(s,r,n,o,e[a+1],12,-389564586),o=m(o,s,r,n,e[a+2],17,606105819),n=m(n,o,s,r,e[a+3],22,-1044525330),r=m(r,n,o,s,e[a+4],7,-176418897),s=m(s,r,n,o,e[a+5],12,1200080426),o=m(o,s,r,n,e[a+6],17,-1473231341),n=m(n,o,s,r,e[a+7],22,-45705983),r=m(r,n,o,s,e[a+8],7,1770035416),s=m(s,r,n,o,e[a+9],12,-1958414417),o=m(o,s,r,n,e[a+10],17,-42063),n=m(n,o,s,r,e[a+11],22,-1990404162),r=m(r,n,o,s,e[a+12],7,1804603682),s=m(s,r,n,o,e[a+13],12,-40341101),o=m(o,s,r,n,e[a+14],17,-1502002290),r=h(r,n=m(n,o,s,r,e[a+15],22,1236535329),o,s,e[a+1],5,-165796510),s=h(s,r,n,o,e[a+6],9,-1069501632),o=h(o,s,r,n,e[a+11],14,643717713),n=h(n,o,s,r,e[a],20,-373897302),r=h(r,n,o,s,e[a+5],5,-701558691),s=h(s,r,n,o,e[a+10],9,38016083),o=h(o,s,r,n,e[a+15],14,-660478335),n=h(n,o,s,r,e[a+4],20,-405537848),r=h(r,n,o,s,e[a+9],5,568446438),s=h(s,r,n,o,e[a+14],9,-1019803690),o=h(o,s,r,n,e[a+3],14,-187363961),n=h(n,o,s,r,e[a+8],20,1163531501),r=h(r,n,o,s,e[a+13],5,-1444681467),s=h(s,r,n,o,e[a+2],9,-51403784),o=h(o,s,r,n,e[a+7],14,1735328473),r=y(r,n=h(n,o,s,r,e[a+12],20,-1926607734),o,s,e[a+5],4,-378558),s=y(s,r,n,o,e[a+8],11,-2022574463),o=y(o,s,r,n,e[a+11],16,1839030562),n=y(n,o,s,r,e[a+14],23,-35309556),r=y(r,n,o,s,e[a+1],4,-1530992060),s=y(s,r,n,o,e[a+4],11,1272893353),o=y(o,s,r,n,e[a+7],16,-155497632),n=y(n,o,s,r,e[a+10],23,-1094730640),r=y(r,n,o,s,e[a+13],4,681279174),s=y(s,r,n,o,e[a],11,-358537222),o=y(o,s,r,n,e[a+3],16,-722521979),n=y(n,o,s,r,e[a+6],23,76029189),r=y(r,n,o,s,e[a+9],4,-640364487),s=y(s,r,n,o,e[a+12],11,-421815835),o=y(o,s,r,n,e[a+15],16,530742520),r=b(r,n=y(n,o,s,r,e[a+2],23,-995338651),o,s,e[a],6,-198630844),s=b(s,r,n,o,e[a+7],10,1126891415),o=b(o,s,r,n,e[a+14],15,-1416354905),n=b(n,o,s,r,e[a+5],21,-57434055),r=b(r,n,o,s,e[a+12],6,1700485571),s=b(s,r,n,o,e[a+3],10,-1894986606),o=b(o,s,r,n,e[a+10],15,-1051523),n=b(n,o,s,r,e[a+1],21,-2054922799),r=b(r,n,o,s,e[a+8],6,1873313359),s=b(s,r,n,o,e[a+15],10,-30611744),o=b(o,s,r,n,e[a+6],15,-1560198380),n=b(n,o,s,r,e[a+13],21,1309151649),r=b(r,n,o,s,e[a+4],6,-145523070),s=b(s,r,n,o,e[a+11],10,-1120210379),o=b(o,s,r,n,e[a+2],15,718787259),n=b(n,o,s,r,e[a+9],21,-343485551),r=v(r,i),n=v(n,c),o=v(o,u),s=v(s,l)}return[r,n,o,s]}(function(e){if(0===e.length)return[];for(var t=8*e.length,r=new Uint32Array(p(t)),n=0;n<t;n+=8)r[n>>5]|=(255&e[n/8])<<n%32;return r}(e),8*e.length))}));var A=r(54032);function E(e,t,r,n){switch(e){case 0:return t&r^~t&n;case 1:case 3:return t^r^n;case 2:return t&r^t&n^r&n}}function S(e,t){return e<<t|e>>>32-t}const I=f("v5",80,(function(e){var t=[1518500249,1859775393,2400959708,3395469782],r=[1732584193,4023233417,2562383102,271733878,3285377520];if("string"==typeof e){var n=unescape(encodeURIComponent(e));e=[];for(var o=0;o<n.length;++o)e.push(n.charCodeAt(o))}else Array.isArray(e)||(e=Array.prototype.slice.call(e));e.push(128);for(var s=e.length/4+2,a=Math.ceil(s/16),i=new Array(a),c=0;c<a;++c){for(var u=new Uint32Array(16),l=0;l<16;++l)u[l]=e[64*c+4*l]<<24|e[64*c+4*l+1]<<16|e[64*c+4*l+2]<<8|e[64*c+4*l+3];i[c]=u}i[a-1][14]=8*(e.length-1)/Math.pow(2,32),i[a-1][14]=Math.floor(i[a-1][14]),i[a-1][15]=8*(e.length-1)&4294967295;for(var d=0;d<a;++d){for(var f=new Uint32Array(80),p=0;p<16;++p)f[p]=i[d][p];for(var v=16;v<80;++v)f[v]=S(f[v-3]^f[v-8]^f[v-14]^f[v-16],1);for(var g=r[0],m=r[1],h=r[2],y=r[3],b=r[4],w=0;w<80;++w){var A=Math.floor(w/20),I=S(g,5)+E(A,m,h,y)+b+t[A]+f[w]>>>0;b=y,y=h,h=S(m,30)>>>0,m=g,g=I}r[0]=r[0]+g>>>0,r[1]=r[1]+m>>>0,r[2]=r[2]+h>>>0,r[3]=r[3]+y>>>0,r[4]=r[4]+b>>>0}return[r[0]>>24&255,r[0]>>16&255,r[0]>>8&255,255&r[0],r[1]>>24&255,r[1]>>16&255,r[1]>>8&255,255&r[1],r[2]>>24&255,r[2]>>16&255,r[2]>>8&255,255&r[2],r[3]>>24&255,r[3]>>16&255,r[3]>>8&255,255&r[3],r[4]>>24&255,r[4]>>16&255,r[4]>>8&255,255&r[4]]})),R="00000000-0000-0000-0000-000000000000";const U=function(e){if(!(0,l.A)(e))throw TypeError("Invalid UUID");return parseInt(e.substr(14,1),16)}},93249:(e,t,r)=>{var n;r.d(t,{A:()=>s});var o=new Uint8Array(16);function s(){if(!n&&!(n="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto)))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return n(o)}},94017:(e,t,r)=>{r.d(t,{A:()=>a});for(var n=r(68957),o=[],s=0;s<256;++s)o.push((s+256).toString(16).substr(1));const a=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=(o[e[t+0]]+o[e[t+1]]+o[e[t+2]]+o[e[t+3]]+"-"+o[e[t+4]]+o[e[t+5]]+"-"+o[e[t+6]]+o[e[t+7]]+"-"+o[e[t+8]]+o[e[t+9]]+"-"+o[e[t+10]]+o[e[t+11]]+o[e[t+12]]+o[e[t+13]]+o[e[t+14]]+o[e[t+15]]).toLowerCase();if(!(0,n.A)(r))throw TypeError("Stringified UUID is invalid");return r}},54032:(e,t,r)=>{r.d(t,{A:()=>s});var n=r(93249),o=r(94017);const s=function(e,t,r){var s=(e=e||{}).random||(e.rng||n.A)();if(s[6]=15&s[6]|64,s[8]=63&s[8]|128,t){r=r||0;for(var a=0;a<16;++a)t[r+a]=s[a];return t}return(0,o.A)(s)}},68957:(e,t,r)=>{r.d(t,{A:()=>o});const n=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;const o=function(e){return"string"==typeof e&&n.test(e)}},4135:(e,t,r)=>{r.d(t,{TelemetrySdkFactory:()=>w});var n=r(72782);var o;!function(e){e.INFO="INFO",e.WARN="WARNING",e.ERROR="ERROR",e.LOG="LOG",e.VERBOSE="VERBOSE",e.DEBUG="DEBUG",e.ASSERT="ASSERT",e.DIR="DIR",e.TABLE="TABLE",e.TRACE="TRACE"}(o||(o={}));var s=r(65729);const a=5,i=6;function c(e,t,r){if(r>i)return e instanceof Map?"[Map]":e instanceof Set?"[Set]":"[Array]";if(e instanceof Map){const n=["[Map]"];return e.forEach(((e,o)=>n.push([u(o,t,r),u(e,t,r)]))),n}if(e instanceof Set){const n=["[Set]"];return e.forEach((e=>n.push(u(e,t,r)))),n}return Array.prototype.map.call(e,(e=>u(e,t,r)))}function u(e,t,r){if(null==e)return e;if(e instanceof Error||e instanceof Date||"symbol"==typeof e||"function"==typeof e)return e.toString();if(Array.isArray(e)||e instanceof Map||e instanceof Set){if(t.includes(e))return"[Circular]";t.push(e);const n=c(e,t,r+1);return t.pop(),n}if("function"==typeof e.then)return"Promise<>";if("object"==typeof e){if(r>a)return"[Object]";if(e.type&&"string"==typeof e.type&&0===e.type.indexOf("$w."))return e.id?`$w('#${e.id}')`:`$w('${e.type.substr(3)}')`;t.push(e);const n=Object.keys(e).reduce(((n,o)=>{const s=e[o];return t.includes(s)?n[o]="[Circular]":n[o]=u(s,t,r+1),n}),{});return t.pop(),n}return e}const l={info:o.INFO,warn:o.WARN,error:o.ERROR,log:o.LOG,debug:o.DEBUG,assert:o.ASSERT,dir:o.DIR,table:o.TABLE,trace:o.TRACE},d=(e,t,r,n)=>(...o)=>{const a=(0,s.isError)(o[0])?o[0].stack:(new Error).stack,i=c(o,[],0);n({logLevel:t,args:i,stack:a}),e[r](...o)},f=e=>{const{register:t,call:r}=(()=>{const e=new Set;return{register:t=>(e.add(t),()=>e.delete(t)),call:t=>{e.forEach((e=>e(t)))}}})(),n=Object.entries(console),s={...Object.fromEntries(n.map((([t,r])=>"function"==typeof r?[t,r.bind(e)]:[t,r]))),verbose:e.log.bind(e)};for(const t in l)if(l.hasOwnProperty(t)&&e.hasOwnProperty(t)){const n=t,o=d(e,l[n],n,r);s[n]=o}return s.verbose=d(e,o.VERBOSE,"log",r),{onLog:t,proxy:s}};var p=r(8830);const v=/^Loading the code for the .+\. To debug this code, open .+ in your browser's Developer Tools\.$/,g=0,m=1,h=2;function y(e){return null===e?String(e):void 0===e?String(void 0):"object"==typeof e?JSON.stringify(e):e}const b=({logLevel:e,args:t})=>{const r=function(e){switch(e){case o.WARN:return"WARNING";case o.ERROR:case o.ASSERT:return"ERROR";case o.DEBUG:return"DEBUG";default:return"INFO"}}(e);if(e===o.ASSERT){if(t[0]){return{message:t.slice(1).map(y).join(" "),severity:r}}}else if(e!==o.VERBOSE){return{message:t.map(y).join(" "),severity:r}}},w=({wixCodeNamespacesRegistry:e,platformEnvData:t,platformUtils:r,onPageWillUnmount:o,appEssentials:s})=>{const{bi:a}=t;let i;const{httpClient:c}=s;return{telemetry:{get console(){if(!i){const s=e.get("site"),u=t.location.externalBaseUrl,l=t.site.viewMode,d="Site"===l?u:r.clientSpecMapApi.getWixCodeBaseUrl(),y=t.location.metaSiteId,w=r.sessionService.getWixCodeInstance(),A=s.revision,E=(0,n.W)({appName:"telemetry-wix-code-sdk",biLoggerFactory:r.biUtils.createBiLoggerFactoryForFedops(),customParams:{viewerName:"thunderbolt"},factory:r.essentials.createFedopsLogger,experiments:r.essentials.experiments.all(),monitoringData:{metaSiteId:t.location.metaSiteId,dc:a.dc,isHeadless:a.isjp,isCached:a.isCached,rolloutData:a.rolloutData,viewerSessionId:a.viewerSessionId}}),S=()=>{const e={baseUrl:d,metaSiteId:y,instance:w,siteUrl:u,viewMode:l,revision:A};try{E.interactionStarted("get-page-name",{customParams:e});const{pageIdToTitle:r}=t.site,{pageId:n}=a.pageData,o=r[n];if(void 0===o)throw new Error(`Page ${n} name is undefined`);return E.interactionEnded("get-page-name",{customParams:{...e,status:"success"}}),o}catch(t){return E.interactionStarted("get-page-name-error",{paramsOverrides:{evid:"26",errorInfo:t.message,eventString:"error"},customParams:{...e,status:"error",error:t.message}}),null}},I=(({baseUrl:e,metaSiteId:t,instance:r,siteUrl:n,viewMode:o,revision:s,fedopsLogger:a,httpClient:i,pageName:c})=>{const u={baseUrl:e,metaSiteId:t,instance:r,siteUrl:n,viewMode:o,revision:s},l=[],d=(async()=>{const n=`${e}/_api/wix-code-telemetry-registry-public/v1/sites/${t}/telemetry/runtime-configuration`;try{a.interactionStarted("is-site-monitoring-enabled",{customParams:u});const e=await fetch(n,{headers:{Authorization:r}});if(!e.ok)return a.interactionEnded("is-site-monitoring-enabled",{customParams:{...u,code:m,status:e.status}}),!1;const t=await e.json();return a.interactionEnded("is-site-monitoring-enabled",{customParams:{...u,code:g}}),t.hasSinks}catch(e){return a.interactionEnded("is-site-monitoring-enabled",{customParams:{...u,code:h,e}}),!1}})(),f=new p.EventId,y=new p.EventId,b=c?{file:c}:null,w=setInterval((async()=>{if(l.length>0&&await d){const t=[];for(let e=0;e<10&&0!==l.length;e++)t.push(l.shift());const r={messages:t};a.interactionStarted("report-events-batch",{customParams:u});const n=`${e}/_api/wix-code-telemetry-collector/v1/telemetry-messages`;i.post(n,r).then((()=>{a.interactionEnded("report-events-batch",{customParams:{...u,code:g}})})).catch((e=>{a.interactionEnded("report-events-batch",{customParams:{...u,code:h,e}})}))}}),500);return{send({message:e,severity:r}){"Script error."===e||v.test(e)||l.push({insertId:y.new(),timestamp:(new Date).toISOString(),severity:r,labels:{siteUrl:n,namespace:"Velo",tenantId:t,viewMode:o,revision:s},operation:{id:f.new(),producer:n,first:!1,last:!1},sourceLocation:b,jsonPayload:{message:e}})},clear(){clearInterval(w)}}})({baseUrl:d,metaSiteId:y,instance:w,siteUrl:u,viewMode:l,revision:A,fedopsLogger:E,httpClient:c,pageName:S()}),{onLog:R,proxy:U}=f(console);if(i=U,!t.window.isSSR){const e=R((e=>async t=>{const r=b(t);r&&e.send(r)})(I));o(e)}}return i}}}}}}]);
//# sourceMappingURL=feature-telemetry-wix-code-sdk.71c5eb27.chunk.min.js.map